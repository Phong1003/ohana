<template>
  <div class="house__detail__container">
    <div v-if="!isShowEdit">
      <div class="image__container mb-4 d-flex justify-content-center">
        <div class="col-6 px-0 image__first mr-1">
          <img
            src="~/assets/images/binhthanh.jpg"
            alt="binh thanh"
            class="image__cover"
          />
        </div>
        <div class="col-6 px-0 cover__image__before d-flex">
          <div class="col-6 px-0 image__before mr-1">
            <div class="h-100 mb-1">
              <img
                src="~/assets/images/binhthanh.jpg"
                alt="binh thanh"
                class="image__cover"
              />
            </div>
            <div class="h-100 mt-1">
              <img
                src="~/assets/images/binhthanh.jpg"
                alt="binh thanh"
                class="image__cover"
              />
            </div>
          </div>
          <div class="col-6 px-0 image__before">
            <div class="h-100 mb-1">
              <img
                src="~/assets/images/binhthanh.jpg"
                alt="binh thanh"
                class="image__cover"
              />
            </div>
            <div class="h-100 mt-1">
              <img
                src="~/assets/images/binhthanh.jpg"
                alt="binh thanh"
                class="image__cover"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="content__section mb-3">
        <div class="title__cover d-flex justify-content-between">
          <p class="title">{{ dataDetail.name }}</p>
          <div class="h3 cursor-pointer mr-3">
            <b-button class="bg-primary border-primary">
              <b-icon icon="box-arrow-up-right"></b-icon>
              <span>Chia s·∫ª</span>
            </b-button>
          </div>
        </div>
        <div class="information__section d-flex mt-4 justify-content-center">
          <div class="house__section col-8 px-0">
            <div class="house__detail">
              <div class="house__title d-flex align-items-center">
                <b-icon
                  icon="house-door-fill"
                  class="bg-light mr-3"
                  variant="danger"
                  font-scale="2"
                ></b-icon>
                <p class="mb-0">Th√¥ng tin ph√≤ng</p>
              </div>
              <div class="house__info mt-4 d-flex">
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">GI√Å PH√íNG</p>
                  <p class="field__value">{{ dataDetail.price }} VNƒê</p>
                </div>
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">DI·ªÜN T√çCH</p>
                  <p class="field__value">
                    {{ dataDetail.capacity }} m√©t vu√¥ng
                  </p>
                </div>
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">ƒê·∫∂T C·ªåC</p>
                  <p class="field__value">{{ dataDetail.deposit }} VNƒê</p>
                </div>
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">ƒê·ªêI T∆Ø·ª¢NG CHO THU√ä</p>
                  <p class="field__value">
                    {{ dataDetail.noSex == 0 ? 'T·∫•t c·∫£' : dataDetail.noSex == 1 ? 'Nam' : dataDetail.noSex == 2 ? 'N·ªØ' : '' }}
                  </p>
                </div>
              </div>
              <div class="house__info mt-4 d-flex">
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">GI√Å ƒêI·ªÜN</p>
                  <p class="field__value">
                    {{ dataDetail.electricprice }}
                  </p>
                </div>
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">GI√Å N∆Ø·ªöC</p>
                  <p class="field__value">
                    {{ dataDetail.waterprice }}
                  </p>
                </div>
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">TI·ªÄN TI·ªÜN √çCH</p>
                  <p class="field__value">
                    {{ dataDetail.otherprice }}
                  </p>
                </div>
                <div class="d-flex flex-column col-3">
                  <p class="mb-0 field__name">TR·∫†NG TH√ÅI</p>
                  <p class="field__value text-success status__value">
                    C√≤n ph√≤ng
                  </p>
                </div>
              </div>
              <div class="house__localtion">
                <div class="d-flex flex-column">
                  <p class="mb-0 field__name">ƒê·ªäA CH·ªà</p>
                  <p class="field__value">
                    {{ dataDetail.address }}, {{ dataDetail.area }}
                  </p>
                </div>
              </div>
            </div>
            <div class="furniture__details mt-5">
              <div class="house__title d-flex align-items-center">
                <b-icon
                  icon="list-check"
                  class="bg-light mr-3"
                  variant="danger"
                  font-scale="2"
                ></b-icon>
                <p class="mb-0">Ti·ªán √≠ch</p>
              </div>
              <div class="mt-3 d-flex flex-wrap">
                <div class="col-3 h-100 d-flex justify-content-start mt-4" v-for="(item, index) in optionsUlities" :key="index">
                  <img
                    :src="item.img"
                    alt="toilet"
                    class="icon__custom"
                  />
                  <span class="icon__title">{{item.name}}</span>
                </div>
              </div>
            </div>
            <div class="notice__details mt-5">
              <div class="house__title d-flex align-items-center">
                <b-icon
                  icon="exclamation-circle"
                  class="bg-light mr-3"
                  variant="danger"
                  font-scale="2"
                ></b-icon>
                <p class="mb-0">L∆∞u √Ω</p>
              </div>
              <div class="capacity__container mt-3">
                <p class="capacity__title">S·ª©c ch·ª©a</p>
              </div>
              <div class="capacity__options d-flex">
                <div class="option col-4">
                  <p class="option__type">R·ªông</p>
                  <div class="option__title bg-info">3 ng∆∞·ªùi</div>
                </div>
                <div class="option col-4">
                  <p class="option__type">V·ª´a</p>
                  <div class="option__title bg-success">4 ng∆∞·ªùi</div>
                </div>
                <div class="option col-4">
                  <p class="option__type">Ch·∫≠t</p>
                  <div class="option__title bg-warning">5 ng∆∞·ªùi +</div>
                </div>
              </div>
            </div>
            <div class="more__information mt-5">
              <div class="house__title d-flex align-items-center">
                <b-icon
                  icon="info"
                  class="bg-light mr-3"
                  variant="dark"
                  font-scale="2"
                ></b-icon>
                <p class="mb-0">M√¥ t·∫£ th√™m</p>
              </div>
              <div class="info__section">
                H√Ä N·ªòI kh√¥ng ·ªü b√¢y gi·ªù th√¨ sau n√†y quay v·ªÅ H√† N·ªôi kh√≥ h∆°n ƒë√≥ !!
                <br />
                <br />
                üëåüèªTHANH NH√ÄN ·ªü g·∫ßn h·ªì v√† c√°c tr∆∞·ªùng h·ªçc. Di·ªán t√≠ch 36m2. Trong
                ph√≤ng g·ªìm: gi∆∞·ªùng, t·ªß, ƒëi·ªÅu ho√†, b√¨nh n√≥ng l·∫°nh, c·ª≠a s·ªï tho√°ng
                m√°t. V√™ sinh kh√©p k√≠n . Gi√° ch·ªâ c√≥ : 3,6tr (n·∫øu ·ªü 1 ng∆∞·ªùi )
                3,8tr ( n·∫øu ·ªü 2 ng∆∞·ªùi)
                <br />
                ‚ùåNh√† kh√¥ng chung ch·ªß n√™n c·∫ßn thanh to√°n ti·ªÅn nh√† 3 th√°ng c·ªçc 1
                th√°ng, FREE gi√∫p vi·ªác, FREE ƒë·ªÉ xe. ( N∆°i ƒë√¢y ch·ªâ d√†nh cho ai
                TH·∫¨T S·ª∞ TH√çCH S·∫†CH S·∫º ‚Äì VƒÇN MINH ‚Äì THO√ÅI M√ÅI )
              </div>
            </div>
          </div>
          <div class="owner__section col-4 ml-2">
            <div class="house__title d-flex align-items-center">
              <b-icon
                icon="person-fill"
                class="bg-light mr-3"
                variant="primary"
                font-scale="2"
              ></b-icon>
              <p class="mb-0">Th√¥ng tin ch·ªß ph√≤ng</p>
            </div>
            <div class="owner__info mt-4">
              <div class="d-flex">
                <img
                  src="~/assets/images/avatar.png"
                  alt="binh thanh"
                  class="avatar__cover"
                />
                <div class="contact">
                  <span class="mb-0 mr-2">{{ dataDetail.houseowner }}</span>
                  <div class="d-flex flex-column mr-2">
                    <span>SƒêT:</span>
                    <span> {{ dataDetail.ownerphone }} </span>
                  </div>
                </div>
                <div class="d-flex created_date ml-3 mb-2 align-items-end">
                  <div class="d-flex flex-column mr-2">
                    <span>SƒêT:</span>
                    <span> {{ dataDetail.ownerphone }} </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <EditHome v-else />
  </div>
</template>

<script>
import { search } from "../../api/dashboard";
import EditHome from "../../components/view/create/newHome.vue";

export default {
  components: {
    EditHome,
  },
  data() {
    return {
      dataDetail: "",
      response: "",
      isShowEdit: false,
      optionsUlities: [
        { item: '1', name: 'WC ri√™ng', img: require('@/assets/icon/toilet.svg') },
        { item: '2', name: 'Wifi', img: require('@/assets/icon/wifi.svg') },
        { item: '3', name: 'An ninh', img: require('@/assets/icon/police-officer.svg') },
        { item: '4', name: 'C·ª≠a s·ªï', img: require('@/assets/icon/window.svg') }
      ],
    };
  },
  async created() {
    this.isShowEdit = this.$route.params.edit;
    await this.handleGetData();
    for (const item of this.response.data) {
      if (item.room.id == this.$route.params.id) {
        this.dataDetail = { ...item.room };
      }
    }
    console.log(this.dataDetail);
    this.optionsUlities = this.optionsUlities.map(el => {
      if(this.dataDetail.utilities.includes(el.item)){
        return el
      }
    }).filter(data => data != undefined)
  },
  methods: {
    async handleGetData() {
      try {
        this.response = await search({
          searchQuery: "",
          price: "",
          category: "",
          utilities: [],
          noSex: "",
          status: "",
          pageNumber: 0,
          pageSize: 10,
        });
      } catch (error) {
        console.log(error);
      }
    },
  },
};
</script>

<style>
@import "@/assets/css/details/index.css";
</style>